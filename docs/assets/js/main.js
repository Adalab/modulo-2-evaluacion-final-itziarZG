const paintFavs=()=>{const e=document.querySelector(".js-main__fav__list");e.innerHTML="";for(const t of favouriteList){const a=document.createElement("li");a.classList.add("js-main__fav__item","main__fav__item");const s=document.createElement("img");s.classList.add("js-main__fav__photo");const n=document.createTextNode(t.name),i=document.createElement("p");i.classList.add("js-main-fav__text");const o=document.createElement("div"),c=document.createTextNode("X");i.appendChild(n),s.setAttribute("src",t.url),o.appendChild(c),o.classList.add("js-main__fav__btn"),a.appendChild(s),a.appendChild(i),a.appendChild(o),a.dataset.id=t.id,e.appendChild(a)}},handleFav=e=>{const t=searchList.find(t=>t.id==e.currentTarget.dataset.id);if(0==favouriteList.length)favouriteList[0]=t;else{const e=favouriteList.findIndex(e=>e.id===t.id);-1===e?favouriteList[favouriteList.length]=t:favouriteList.splice(e,1)}paintFavs(),setToLocalSt(),listenButFavs()},handleDelFav=e=>{const t=e.currentTarget.parentElement.dataset.id,a=favouriteList.findIndex(e=>e.id==t);favouriteList.splice(a,1),paintFavs(),setToLocalSt(),listenButFavs()},listenButFavs=()=>{const e=document.querySelectorAll(".js-main__fav__btn");for(const t of e)t.addEventListener("click",handleDelFav)},listenFilms=()=>{const e=document.querySelectorAll(".js-main__search__item");for(const t of e)t.addEventListener("click",handleFav)},setToLocalSt=()=>{let e="";for(const t of favouriteList)e+=JSON.stringify(t);console.log(e),e=JSON.stringify(e),localStorage.setItem("favs",e)},getFromLocalSt=()=>{if(null!=localStorage.getItem("favs")){console.log("hay data");const e=JSON.parse(localStorage.getItem("favs"));console.log(e);const t=JSON.parse(e);console.log(t)}},buttonEl=document.querySelector(".js-main__button");let searchList=[],favouriteList=[];const paintFilms=()=>{const e=document.querySelector(".js-main__search__list");e.innerHTML="";for(const t of searchList){const a=document.createElement("li");a.classList.add("js-main__search__item","main__search__item");const s=document.createElement("img");s.classList.add("js-main__search__photo");const n=document.createTextNode(t.name),i=document.createElement("p");i.classList.add("js-main__search__text"),i.appendChild(n),s.setAttribute("src",t.url),a.appendChild(s),a.appendChild(i),a.dataset.id=t.id,e.appendChild(a)}},getData=e=>{fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{searchList=[];for(const t of e){let e="";e=null===t.show.image?"//via.placeholder.com/210x295/ffffff/666666/?text=TV":t.show.image.medium;const a={name:t.show.name,id:t.show.id,url:e};searchList.push(a)}paintFilms(),listenFilms()})},handleClick=e=>{e.preventDefault();const t=document.querySelector(".js-main__input").value;t&&getData(t)};buttonEl.addEventListener("click",handleClick);