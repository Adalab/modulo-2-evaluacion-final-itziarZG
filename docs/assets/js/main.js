const paintFavs=()=>{const e=document.querySelector(".js-main__fav__list");e.innerHTML="";for(const t of favouriteList){const a=document.createElement("li");a.classList.add("js-main__fav__item","main__fav__item");const n=document.createElement("img");n.classList.add("js-main__fav__photo");const s=document.createTextNode(t.name),i=document.createElement("p");i.classList.add("js-main-fav__text");const c=document.createElement("div"),d=document.createTextNode("X");i.appendChild(s),n.setAttribute("src",t.url),c.appendChild(d),c.classList.add("js-main__fav__btn"),a.appendChild(n),a.appendChild(i),a.appendChild(c),a.dataset.id=t.id,e.appendChild(a)}},handleFav=e=>{const t=searchList.find(t=>t.id==e.currentTarget.dataset.id);if(0==favouriteList.length)favouriteList[0]=t;else{const e=favouriteList.findIndex(e=>e.id===t.id);-1===e?favouriteList[favouriteList.length]=t:favouriteList.splice(e,1)}paintFavs(),listenButFavs()},handleDelFav=e=>{const t=e.currentTarget.parentElement.dataset.id,a=favouriteList.findIndex(e=>e.id==t);favouriteList.splice(a,1),paintFavs(),listenButFavs()},listenButFavs=()=>{const e=document.querySelectorAll(".js-main__fav__btn");for(const t of e)t.addEventListener("click",handleDelFav)},listenFilms=()=>{const e=document.querySelectorAll(".js-main__search__item");for(const t of e)t.addEventListener("click",handleFav)},buttonEl=document.querySelector(".js-main__button");let searchList=[],favouriteList=[];const paintFilms=()=>{const e=document.querySelector(".js-main__search__list");e.innerHTML="";for(const t of searchList){const a=document.createElement("li");a.classList.add("js-main__search__item","main__search__item");const n=document.createElement("img");n.classList.add("js-main__search__photo");const s=document.createTextNode(t.name),i=document.createElement("p");i.classList.add("js-main__search__text"),i.appendChild(s),n.setAttribute("src",t.url),a.appendChild(n),a.appendChild(i),a.dataset.id=t.id,e.appendChild(a)}},getData=e=>{fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{searchList=[];for(const t of e){let e="";e=null===t.show.image?"//via.placeholder.com/210x295/ffffff/666666/?text=TV":t.show.image.medium;const a={name:t.show.name,id:t.show.id,url:e};searchList.push(a)}paintFilms(),listenFilms()})},handleClick=e=>{e.preventDefault();const t=document.querySelector(".js-main__input").value;t&&getData(t)};buttonEl.addEventListener("click",handleClick);